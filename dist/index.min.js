!function(){var e,t,n;function r(t,n){var r,e={}.hasOwnProperty;for(r in n)e.call(n,r)&&(t[r]=n[r]);return t}(e=function(t,n,r,e){return this.a=t,this.b=n,this.c=r,this.d=e,this}).prototype=r(Object.create(Object.prototype),t={calc:function(t,n,r,e,o){return null==n&&(n=this.a),null==r&&(r=this.b),null==e&&(e=this.c),null==o&&(o=this.d),n*Math.pow(t,3)+r*Math.pow(t,2)+e*t+o},root:function(t,n,r,e,o){var a,c,s,i;return null==n&&(n=this.a),null==r&&(r=this.b),null==e&&(e=this.c),null==o&&(o=this.d),t=(i=r*e-9*n*(o-=t=null==t?0:t))*i-4*(a=r*r-3*n*e)*(c=e*e-3*r*o),a==i&&0==i?[-r/(3*n),-e/r,-3*o/e]:0<t?(e=a*r+3*n*(-i+Math.sqrt(i*i-4*a*c))/2,s=a*r+3*n*(-i-Math.sqrt(i*i-4*a*c))/2,[(-r-(Math.cbrt(e)+Math.cbrt(s)))/(3*n)]):0==t?[-r/n+(s=i/a),-s/2,-s/2]:t<0?(i=(2*a*r-3*n*i)/(2*a*Math.sqrt(a)),i=Math.acos(i),[(-r-2*Math.sqrt(a)*Math.cos(i/3))/(3*n),(-r+Math.sqrt(a)*(Math.cos(i/3)+Math.sqrt(3)*Math.sin(i/3)))/(3*n),(-r+Math.sqrt(a)*(Math.cos(i/3)-Math.sqrt(3)*Math.sin(i/3)))/(3*n)]):void 0}}),r(e,t),e.glsl="float cubic(float x, vec4 p) {\n  return p.x * x * x * x + p.y * x * x + p.z * x + p.w;\n}\n/* 3 roots, 1 for root count */\nvec4 cubicRoot(float y, vec4 p) {\n  float a, b, c, d, A, B, C, D, y1, y2, k, theta, x1, x2, x3;\n  d = d - y;\n  A = b * b - 3. * a * c;\n  B = b * c - 9. * a * d;\n  C = c * c - 3. * b * d;\n  D = B * B - 4. * A * C;\n  if(A==B && B==0.) return vec4(-b / (3. * a), -c / b, -3. * d / c, 3.);\n  if(D > 0) {\n    y1 = A * b + 3. * a * (-B + sqrt(D)) * 0.5;\n    y2 = A * b + 3. * a * (-B - sqrt(D)) * 0.5;\n    return vec4(vec3(-b - (cbrt(y1) + cbrt(y2)) / ( 3. * a)), 1.);\n  } else if(D == 0) {\n    k = B/A;\n    return vec4((-b/a) + k, -k/2., -k/2., 2.);\n  } else if(D < 0) {\n    k = (2. * A * b - 3 * a * B) / (2. * A * sqrt(A));\n    theta = acos(k) / 3.;\n    x1 = (-b - 2. * sqrt(A) * cos(theta)) / (3. * a);\n    x2 = (-b + sqrt(A) * (cos(theta) + sqrt(3.) * sin(theta))) / (3. * a);\n    x3 = (-b + sqrt(A) * (cos(theta) - sqrt(3.) * sin(theta))) / (3. * a);\n    return vec4(x1, x2, x3, 3.);\n  }\n}",(n=function(t){return this.p=t,this.coff=t=[3*t[0]-3*t[2]+1,-6*t[0]+3*t[2],3*t[0],0],this.eq=new e(t[0],t[1],t[2],t[3]),this}).prototype=r(Object.create(Object.prototype),t={x2y:function(t,n){return null==n&&(n=this.p),this.y(this.t(t))},x:function(t,n){return null==n&&(n=this.p),3*Math.pow(1-t,2)*t*n[0]+3*(1-t)*t*t*n[2]+t*t*t},y:function(t,n){return null==n&&(n=this.p),3*Math.pow(1-t,2)*t*n[1]+3*(1-t)*t*t*n[3]+t*t*t},t:function(t,n,r){return null==r&&(r=1e-6),n=n?e.root(t,3*n[0]-3*n[2]+1,-6*n[0]+3*n[2],3*n[0],0):this.eq.root(t),null==(t=(n=r?n.map(function(t){return Math.round(t/r)*r}):n).filter(function(t){return 0<=t&&t<=1})[0])?((n=n.map(function(t){return[t,Math.min(Math.abs(t),Math.abs(t-1))]})).sort(function(t,n){return t[0]-n[0]}),n[0]):t}}),r(n,t),n={func:e,bezier:n,Func:e,Bezier:n},"undefined"!=typeof module&&null!==module?module.exports=n:"undefined"!=typeof window&&null!==window&&(window.cubic=n)}.call(this);
